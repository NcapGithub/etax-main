(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{358:function(t,e,n){t.exports=n.p+"img/next-money-logo.d21a2e0.png"},359:function(t,e,n){t.exports=n.p+"img/warning.b1d3c54.png"},360:function(t,e,n){t.exports=n.p+"img/authentication.ee7d825.png"},361:function(t,e,n){t.exports=n.p+"img/insurance.885c5e0.png"},370:function(t,e,n){"use strict";n.r(e);var c=[function(){var t=this,e=t._self._c;return e("head",[e("meta",{attrs:{charset:"UTF-8"}}),t._v(" "),e("title",[t._v("ยืนยันตัวตน")]),t._v(" "),e("link",{attrs:{href:"../assets/css/bootstrap.min.css",rel:"stylesheet"}}),t._v(" "),e("link",{attrs:{href:"../assets/css/styles.min.css",rel:"stylesheet"}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"center-body-2"},[e("div",{staticClass:"text-footer"},[e("label",[t._v("ตรวจสอบและดาวน์โหลดเอกสาร ")]),e("label",{staticClass:"text-red-sms"},[t._v("  ภายใน 90 วัน ")]),e("br"),e("label",[t._v("นับตั้งแต่ได้รับข้อความ")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex-2"},[e("div",{staticClass:"footer-sms"},[e("div",{staticClass:"item"},[e("img",{staticClass:"mx-auto d-block img-fluid",staticStyle:{width:"50px"},attrs:{src:n(360)}}),t._v(" "),e("label",[t._v("ปกป้องข้อมูลการใช้งาน")])]),t._v(" "),e("div",{},[e("img",{staticClass:"mx-auto d-block img-fluid",staticStyle:{width:"50px"},attrs:{src:n(361)}}),t._v(" "),e("label",[t._v("เข้าใช้งานด้วยรหัสผ่าน")])])])])}],l=(n(1),n(4),n(362));var o={components:{VuePdfEmbed:n.n(l).a},data:function(){return{idcard:"",pdf:"",bucketName:"",fileName:"",birthDate:"",loanId:"",param:{},checkBirthDay:!1,listBirthDate:[],validData:!1,showBody:!0,showInput:!0,showValid:!1,showPdf:!1,validDataText:"ระบุรหัสผ่านไม่ถูกต้อง",carLicenseNumber:"",acceptBirthDate:!1,classValidInput:"id-card-passcode",documentname:"ใบแจ้งยอดบัญชี/ใบเสร็จอิเล็กทรอนิกส์",documentNcbName:"หนังสือแจ้งการส่งข้อมูลให้แก่บริษัทข้อมูลเครดิตแห่งชาติ จำกัดทางอิเล็กทรอนิกส์",loading:!1,isMobileDevice:!1,source2:""}},mounted:function(){this.bucketName=this.$route.query.bucketName,this.fileName=this.$route.query.fileName,this.loanId=this.$route.query.loanId,this.carLicenseNumber=this.$route.query.carLicenseNumber},watch:{idcard:function(t,e){8===t.length?document.getElementById("acceptBtn").disabled=!1:(this.showInput=!0,this.showValid=!1,document.getElementById("acceptBtn").disabled=!0)}},methods:{callPdf:function(){8===this.idcard.length&&(this.loading=!0,this.checkBirthDate(this))},checkBirthDate:function(t){var e=this;t.$axios.$get("https://prod-api.nextmoney.co.th/APIEtax/api/EApplication/user-details?loanId="+this.loanId).then((function(t){0===t.length&&(e.showValid=!0,e.showInput=!1,e.loading=!1),t.forEach((function(a){a.birthdate===e.idcard?(e.checkBirthDay=!0,e.openPdf(e)):(e.showInput=!1,e.showValid=!0)}))})).catch((function(t){console.log(t)}))},openPdf:function(t){var e=this,n=t.$axios,c={bucketName:this.bucketName,filename:this.fileName};n.$post("https://synergy.nextcapital.co.th/APIS3/api/AWS/GetFile",c).then((function(t){e.showBody=!1,e.pdf=t,e.source2=t,e.isMobile()})).catch((function(t){console.log(t)}))},isMobile:function(){if(screen.width<=760)this.isMobileDevice=!0,this.showPdf=!0,this.loading=!1;else{this.isMobileDevice=!1;var t="";t=null!=this.carLicenseNumber?this.documentname:this.documentNcbName,e=this.pdf,n=t,(c=window.open("")).document.write("<html<head><title>"+n+"</title><style>body{margin: 0px;}iframe{border-width: 0px;}</style></head>"),c.document.write("<iframe width='100%' height='100%' src='"+e+"'></iframe>","_self"),this.loading=!1}var e,n,c},NumbersOnly:function(t){if(void 0!==t.key){var e=t.which?t.which:t.keyCode;if(!(e>31&&(e<48||e>57)&&46!==e))return!0;t.preventDefault()}}}},d=n(38),component=Object(d.a)(o,(function(){var t=this,e=t._self._c;return e("html",{attrs:{lang:"en"}},[this.showPdf?e("div",[e("vue-pdf-embed",{attrs:{source:t.source2}})],1):t._e(),t._v(" "),t._m(0),t._v(" "),!0===this.loading?e("div",{staticClass:"loading"}):t._e(),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:this.showBody,expression:"this.showBody"}]},[e("div",{staticClass:"container-sms"},[e("div",{staticClass:"body-sms"},[e("div",{staticClass:"top-flex"},[e("img",{staticClass:"mx-auto d-block img-fluid",staticStyle:{width:"150px"},attrs:{src:n(358)}}),t._v(" "),e("br"),t._v(" "),null!=this.carLicenseNumber?e("div",{staticClass:"text-center"},[e("label",{staticClass:"sms-top-text"},[t._v(t._s(this.documentname))]),e("br"),t._v(" "),e("label",{staticClass:"sms-top-text"},[t._v("เลขที่สัญญา   ")]),e("label",{staticClass:"sms-loan-text"},[t._v(t._s(this.loanId)+" ")]),e("br"),t._v(" "),e("label",{staticClass:"sms-top-text"},[t._v("ทะเบียน   ")]),e("label",{staticClass:"sms-loan-text"},[t._v(t._s(this.carLicenseNumber)+" ")])]):t._e(),t._v(" "),null===this.carLicenseNumber?e("div",{staticClass:"text-center"},[e("label",{staticClass:"sms-top-text"},[t._v(t._s(this.documentNcbName))]),e("br"),t._v(" "),e("label",{staticClass:"sms-top-text"},[t._v("เลขที่สัญญา   ")]),e("label",{staticClass:"sms-loan-text"},[t._v(t._s(this.loanId)+" ")]),e("br")]):t._e()])]),t._v(" "),e("div",{staticClass:"center-body-flex"},[e("div",{staticClass:"center-body-1"},[e("p",{staticClass:"sms-text-box"},[t._v("กรุณาใส่รหัสผ่าน 8 หลักของท่าน")]),t._v(" "),e("p",{staticClass:"text-warning-sms"},[t._v("ใช้รหัส วันเดือนปีเกิด เช่น 5 ม.ค พ.ศ. 2513 ใส่ 05011970")]),t._v(" "),e("div",{staticClass:"text-center"},[t.showInput?e("div",{staticClass:"id-card-passcode"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.idcard,expression:"idcard"}],attrs:{placeholder:"รหัสผ่าน",maxlength:"8",type:"number",pattern:"[0-9]*",inputmode:"numeric",id:"idCard",name:"idCard"},domProps:{value:t.idcard},on:{keypress:function(e){return t.NumbersOnly(e)},input:function(e){e.target.composing||(t.idcard=e.target.value)}}})]):t._e(),t._v(" "),t.showValid?e("div",{staticClass:"id-card-passcode-valid"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.idcard,expression:"idcard"}],attrs:{placeholder:"รหัสผ่าน",maxlength:"8",type:"number",pattern:"[0-9]*",inputmode:"numeric",id:"idCard",name:"idCard"},domProps:{value:t.idcard},on:{num:function(e){return t.NumbersOnly(e)},input:function(e){e.target.composing||(t.idcard=e.target.value)}}})]):t._e(),t._v(" "),t.showValid?e("div",{staticClass:"flex-valid"},[e("img",{staticClass:"icon-warning",staticStyle:{width:"20px"},attrs:{src:n(359)}}),t._v(t._s(t.validDataText)+"\n                ")]):t._e(),t._v(" "),e("div",{staticClass:"p-3 text-center"},[e("numkeyboard",{attrs:{"ok-text":"OK","text-align":"left"},model:{value:t.num,callback:function(e){t.num=e},expression:"num"}}),t._v(" "),e("button",{staticClass:"btn-pass-code text-white",attrs:{type:"button",id:"acceptBtn",disabled:""},on:{click:function(e){return t.callPdf()}}},[t._v("\n                    ยืนยัน\n                  ")])],1)])]),t._v(" "),t._m(1)]),t._v(" "),t._m(2)])])])}),c,!1,null,null,null);e.default=component.exports}}]);